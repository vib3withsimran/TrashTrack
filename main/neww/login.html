<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="./output.css">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Libertinus+Sans:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body class="font-family-libertinus">
    <div id="back-option" class="m-3 text-2xl absolute text-black z-400">
        <i class="fa-solid fa-arrow-left"></i>
        <a href="./index.html">Back</a>
    </div>
    <section id="loginSign" class=" bg-center h-[100vh] bg-[url(https://corex-honeycomb.com/wp-content/uploads/2022/01/Sustainability-in-the-composite-industry-scaled.jpg)] bg-cover md:flex md:flex-row md:justify-around">
        <div id="login" class="grid items-center text-center justify-center">
            <div id="login-box" class="w-[420px] h-fit mt-[150px] text-shadow-[rgba(0,0,0,0.8)] border-2 border-[rgba(255,255,255,0.2)] shadow-xl/30 border-solid backdrop-blur-2xl rounded-2xl transition-opacity ease-in-out p-5">
                <form action="" id="loginForm">
                    <h1 class="text-2xl text-center font-bold">Login</h1>
                    <div class="input-box relative w-[350px] h-[50px] mt-7 mb-7 pl-4">
                        <input placeholder="Email" id="loginEmail" class="w-[350px] h-full border-2 active:shadow-2xl border-[rgba(255,255,255,0.7)] rounded-3xl text-md pt-5 pl-11 pb-5 pr-5" required> 
                        <i class="fa-solid fa-user absolute right-3 top-[35%] text-xl"></i>               
                    </div>
                    <div class="input-box relative w-[350px] h-[50px] mt-7 mb-7 pl-4">
                        <input placeholder="Password" id="loginPassword" type="password" required class="w-[350px] h-full border-2 active:shadow-2xl border-[rgba(255,255,255,0.7)] rounded-3xl text-md pt-4 pl-11 pb-4 pr-5">
                        <i class="fa-solid fa-lock absolute right-3 top-[35%] text-xl"></i>
                    </div>
                    <div class="remember-forgot flex justify-around text-md mt-[15px] mb-[15px]">
                        <label class=""><input type="checkbox">Remember me</label>
                        <a href="#" class="hover:underline">Forgot password?</a>
                    </div>
                    <button type="submit" class="btn w-[350px] h-[45px] border rounded-2xl shadow-xl cursor-pointer text-xl text-[#333] font-semibold bg-[rgba(255,255,255,0.9)]">Login</button>
                    <div class="register-link text-md text-center mt-4 flex mb-4 flex-row justify-center">
                        <p >Don't have account?</p> <a class="pl-[10px] hover:underline" href="./register.html">Register</a>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <script>
         document.querySelector("#loginForm")?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.querySelector("#loginEmail").value.trim();
    const password = document.querySelector("#loginPassword").value;

    const res = await fetch("http://localhost:5000/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if (res.ok) {
        // store JWT token in localStorage if you're using tokens
        if (data.token) {
            localStorage.setItem("token", data.token);
        }
        alert(data.message || "Login successful!");
        
        window.location.href = "index.html";
    } else {
        alert(data.error || "Invalid email or password");
    }
  });
    </script>
    
</body>
</html>